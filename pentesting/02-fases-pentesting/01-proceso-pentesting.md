# 01 - El Proceso de Pentesting: El Ciclo de Vida del Hackeo ðŸ”„

> **ðŸŽ¯ Objetivo:** DejarÃ¡s de ver el hacking como un acto aleatorio de teclear rÃ¡pido. AprenderÃ¡s el **Ciclo de Vida del Pentesting**, una estructura de 8 pasos que diferencia a un profesional metÃ³dico de un aficionado con suerte. EntenderÃ¡s que el ataque real es solo una pequeÃ±a parte del todo.

---

## 1. Â¿QuÃ© es un Proceso? ðŸ³ vs ðŸŽ·

Antes de ver los pasos, definamos quÃ© estamos haciendo. Hay dos tipos de procesos:
1. **Deterministas (Receta de cocina):** Es un proceso en el que cada estado depende causalmente y estÃ¡ determinado por otros estados y eventos previos. 
	 * **Ejemplo:** Si sigues los pasos A, B y C, _siempre_ obtienes el pastel D. Es predecible.
2. **EstocÃ¡sticos (Jazz):** Es aquel en el que un estado se deriva de otros estados solo con cierta probabilidad. AquÃ­ solo se pueden asumir condiciones estadÃ­sticas. 
	* **Ejemplo:** Tienes una estructura y notas musicales, pero el resultado depende de probabilidades y de lo que ocurra en el momento.

**El Pentesting es EstocÃ¡stico.**

No hay una guÃ­a paso a paso infalible. Cada red es un mundo. Si encuentras una puerta cerrada, buscas una ventana. Si la ventana tiene rejas, buscas el conducto de aire. Debes ser flexible.

> **ðŸ’¡ Nota:** Aunque seguimos fases ordenadas, el proceso suele ser **Circular**. A veces, cuando estÃ¡s en la fase 5 (Post-explotaciÃ³n), encuentras un dato que te obliga a volver a la fase 2 (RecolecciÃ³n de InformaciÃ³n). No es una lÃ­nea recta, es un ciclo vivo.

---

## 2. Las 8 Etapas del Pentesting ðŸªœ

![[penetration-testing-process.png]]

Vamos a desglosar el "Ritual del Hacker" en 8 fases crÃ­ticas. Memoriza este flujo, es tu mapa del tesoro.

### Fase 1: Pre-Engagement (El Acuerdo ðŸ¤)

- **Â¿QuÃ© pasa aquÃ­?** Reuniones, contratos y firmas. Antes de tocar una tecla, se definen las reglas del juego. Es burocracia, pero te salva de la cÃ¡rcel.
    
- **Conceptos Clave:**
    
    - **NDA:** Acuerdo de confidencialidad (lo que ves, se queda aquÃ­).
        
    - **Scope (Alcance):** Â¿QuÃ© puedo atacar y quÃ© no?
        
    - **Time Estimation:** Â¿CuÃ¡nto tardarÃ©?
        
    - **Rules of Engagement (RoE):** Â¿Puedo atacar a las 3 AM? Â¿Puedo hacer ingenierÃ­a social a los empleados?
### Fase 2: Information Gathering (El Espionaje ðŸ•µï¸â€â™‚ï¸)

- **Â¿QuÃ© pasa aquÃ­?:** AquÃ­ empieza la tÃ©cnica. Buscamos _todo_ sobre el objetivo. Buscamos IPs, dominios, correos de empleados, tecnologÃ­as que usan. Buscamos la grieta en la armadura.
	- **Ejemplo:** Es como un ladrÃ³n vigilando una casa desde un coche aparcado. Anota cuÃ¡ndo salen los dueÃ±os, quÃ© marca es la alarma y si el perro muerde.
### Fase 3: Vulnerability Assessment (El DiagnÃ³stico ðŸ©º)

- **Â¿QuÃ© pasa aquÃ­?:** Tomamos la informaciÃ³n del paso anterior y buscamos fallos conocidos. Usamos escÃ¡neres y anÃ¡lisis manual para listar los puntos dÃ©biles.
	- **Diferencia:** En la fase 2 vimos que usan "Windows 10". En la fase 3 analizamos: "Â¿Esa versiÃ³n de Windows tiene parches de seguridad faltantes?".
### Fase 4: Exploitation (El Golpe ðŸ”¨)

- **Â¿QuÃ© pasa aquÃ­?:** El momento de la verdad. Lo que sale en las pelÃ­culas. Usamos las vulnerabilidades encontradas para romper la seguridad y obtener acceso inicial.
	> **ðŸ’¡Nota:** A menudo es el paso mÃ¡s corto. Si hiciste bien la fase 2 y 3, esto es solo ejecutar un script o un comando preciso.


### Fase 5: Post-Exploitation (La OcupaciÃ³n â›º)

- **Â¿QuÃ© pasa aquÃ­?:** Ya estÃ¡s dentro. Â¿Ahora quÃ©? No basta con entrar; hay que asegurar la posiciÃ³n.
	- **Persistencia:** Instalar una puerta trasera para volver a entrar si el administrador reinicia el servidor.
    
	- **Escalada de Privilegios:** Entraste como un usuario normal ("invitado"), ahora quieres ser el jefe ("Administrador" o "Root").
    
	- **Pillaging (Saqueo):** Buscar contraseÃ±as, documentos sensibles, correos del CEO.
    

### Fase 6: Lateral Movement (El Salto de Rana ðŸ¸)

- **Â¿QuÃ© pasa aquÃ­?:** Nos movermos desde el host comprometido hacia otros servidores dentro de la red interna. Rara vez el primer ordenador que hackeas es el que tiene el oro. Normalmente entras en la recepciÃ³n y quieres llegar a la caja fuerte en el sÃ³tano.
	- **Ejemplo:** Hackeas el PC de la secretaria -> Encuentras una contraseÃ±a -> La usas para saltar al Servidor de Base de Datos.
### Fase 7: Proof-of-Concept (La Evidencia ðŸ“¸)

- **Â¿QuÃ© pasa aquÃ­?:**  Documentamos paso a paso cÃ³mo lograste el hackeo. "Si no hay foto, no pasÃ³".
	- **Â¿Por quÃ©?** Para que el cliente pueda replicarlo y entender que el riesgo es real. A veces implica crear scripts automatizados para demostrar el fallo.

### Fase 8: Post-Engagement (El Informe y Limpieza ðŸ§¹)

- **Â¿QuÃ© pasa aquÃ­?:** La fase final y la mÃ¡s importante para el negocio.
	1. **Informe:** Escribes el reporte detallado (uno tÃ©cnico y uno ejecutivo).
    
	2. **Limpieza:** Borras tus herramientas, tus puertas traseras y tus logs. Dejas la casa tal cual la encontraste.
    
	3. **PresentaciÃ³n:** Explicas a los directivos quÃ© tan grave fue.
    

### Tabla Resumen de Etapas ðŸ“Š

| **Etapa** | **Nombre**            | **AnalogÃ­a**                    | **AcciÃ³n Principal**                    |
| --------- | --------------------- | ------------------------------- | --------------------------------------- |
| **1**     | **Pre-Engagement**    | Firmar el contrato de la pelea  | Definir Alcance y NDA.                  |
| **2**     | **Info Gathering**    | Vigilar la casa con binoculares | Reconocimiento, buscar IPs/TecnologÃ­as. |
| **3**     | **Vuln Assessment**   | Buscar ventanas abiertas        | Escaneo de fallos y debilidades.        |
| **4**     | **Exploitation**      | Entrar por la ventana           | Obtener acceso inicial.                 |
| **5**     | **Post-Exploitation** | Buscar las joyas en los cajones | Saqueo y Escalada de Privilegios.       |
| **6**     | **Lateral Movement**  | Ir de la cocina al dormitorio   | Moverse a otros servidores de la red.   |
| **7**     | **Proof-of-Concept**  | Tomar fotos del robo            | Documentar la cadena de ataque.         |
| **8**     | **Post-Engagement**   | Limpiar huellas y explicar      | Reporte final y limpieza de logs.       |
![[fases-pentest2.png]]

---
### ðŸŽ“ Resumen para llevar

- **No es lineal:** Aunque lo estudiamos en orden, en la vida real saltarÃ¡s de la fase 6 a la 2 constantemente.
    
- **El ataque es poco:** La "ExplotaciÃ³n" es solo 1 de 8 pasos. La preparaciÃ³n (Fases 1-3) y el reporte (Fase 8) son el 80% del trabajo.
    
- **Movimiento Lateral:** Es la clave para comprometer una red entera a partir de un solo PC dÃ©bil.
    
- **Limpieza:** Un buen profesional nunca deja basura (malware o herramientas) en el servidor del cliente.