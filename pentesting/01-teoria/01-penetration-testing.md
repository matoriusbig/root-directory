# 0 - Fundamentos del Pentesting y GestiÃ³n de Riesgos ðŸŒ

> **ðŸŽ¯ Objetivo:** EntenderÃ¡s quÃ© es realmente un Pentest (y quÃ© no lo es), cÃ³mo las empresas manejan el "miedo" (riesgo) y las diferentes formas en que nosotros, como hackers Ã©ticos, abordamos un objetivo. Es la base teÃ³rica vital antes de tocar cualquier terminal.

---

## 1. El Panorama: Â¿Por quÃ© estamos aquÃ­?

Imagina una fortaleza medieval ðŸ°. En la antigÃ¼edad, los reyes construÃ­an muros altos para proteger su oro. Hoy, las empresas construyen firewalls para proteger sus **datos** (que valen mÃ¡s que el oro).

El problema es que los atacantes modernos no usan catapultas; usan ransomware y phishing. Si una empresa pierde sus datos o sus sistemas se caen, pierden dinero, reputaciÃ³n y clientes.

AquÃ­ entramos nosotros.

### Â¿QuÃ© es un Pentest?

Un **Penetration Test (Prueba de PenetraciÃ³n)** es un ciberataque simulado, autorizado y controlado.

- **La MisiÃ³n:** Encontrar **TODAS** las vulnerabilidades posibles antes de que lo haga un criminal.
    
- **La Diferencia Clave:** A diferencia de un ataque real, nosotros reportamos el fallo en lugar de explotarlo para hacer daÃ±o.
    

> **ðŸ’¡ Nota:** A menudo confundimos tÃ©rminos. Un **Pentest** busca _todos_ los fallos. Un **Red Team Assessment** es mÃ¡s como una pelÃ­cula de espÃ­as: tienen un objetivo especÃ­fico (ej: "leer el correo del CEO") y harÃ¡n lo que sea para lograrlo, sin importar si ignoran otras fallas en el camino.

---

## 2. GestiÃ³n de Riesgos: El Arte de Dormir Tranquilo ðŸ“‰

NingÃºn sistema es 100% seguro. Es imposible. Vivir conlleva riesgos.

La AnalogÃ­a del Conductor:

Imagina que conduces un coche. Existe el riesgo de chocar.

1. **Riesgo Inherente:** Es el peligro que existe solo por el hecho de conducir, aunque seas un piloto de FÃ³rmula 1.
    
2. **Mitigar:** Usas cinturÃ³n de seguridad y frenos ABS (Controles de seguridad).
    
3. **Transferir:** Compras un seguro de auto (Si chocas, otro paga).
    
4. **Aceptar:** Sabes que puedes chocar, pero conduces igual porque necesitas ir al trabajo.
    

En ciberseguridad es igual. Las empresas hacen **GestiÃ³n de Riesgos (Risk Management)** para mantener el peligro en un nivel aceptable.

> **ðŸ›¡ï¸ Nota de Seguridad:** Como Pentesters, somos **asesores**. Encontramos el agujero, demostramos cÃ³mo entrar y sugerimos cÃ³mo taparlo. Pero **NUNCA** aplicamos el parche nosotros mismos ni arreglamos el cÃ³digo. Esa es responsabilidad del cliente. Nosotros diagnosticamos; el mÃ©dico (cliente) opera.

---

## 3. Pentest vs. AnÃ¡lisis de Vulnerabilidades: No son lo mismo ðŸ¤– vs ðŸ§ 

Esta es una pregunta clÃ¡sica de entrevista. Vamos a usar una analogÃ­a simple:

- **AnÃ¡lisis de Vulnerabilidades (Vulnerability Assessment):** Es como pasar el corrector ortogrÃ¡fico de Word. Es rÃ¡pido, automÃ¡tico y encuentra errores obvios, pero no entiende el contexto (no sabe si tu poema es malo, solo si estÃ¡ bien escrito). 
	* **Herramientas**:  [Metasploit](https://www.metasploit.com/),  [Nessus](https://www.tenable.com/products/nessus), [Burp Suite Pro](https://portswigger.net/burp/pro), [Aircrack-ng](https://www.aircrack-ng.org/), [SQLMap](https://sqlmap.org/), [Nikto](https://cirt.net/Nikto2),  [W3af](http://w3af.org/), [Intruder](https://www.intruder.io/), [Netspark Security Scanner](https://www.invicti.com/), [Acunetix Scanner](https://www.acunetix.com/).
    
- **Pentest:** Es como contratar a un editor humano experto. Lee el libro, entiende la trama y encuentra agujeros en la historia que el software no vio. Combina herramientas automÃ¡ticas con astucia humana manual.
    

|**CaracterÃ­stica**|**AnÃ¡lisis de Vulnerabilidades**|**Pentest (Prueba de PenetraciÃ³n)**|
|---|---|---|
|**Herramientas**|100% Automatizadas (EscÃ¡neres)|Manual + Automatizadas|
|**Enfoque**|Lista de fallos conocidos ("Checklist")|SimulaciÃ³n de ataque real y cadenas de fallos|
|**Profundidad**|Superficial (Ancho)|Profundo (Encuentra la raÃ­z)|
|**Falsos Positivos**|Muchos (La mÃ¡quina se equivoca)|Pocos (El humano verifica)|
![[pentes-vs-vulnerability-assesment.png]]

---

## 4. Legalidad: Tu "Tarjeta para Salir de la CÃ¡rcel" âš–ï¸

Antes de tocar una tecla, necesitas permiso.

Sin un contrato firmado, lo que hacemos es ilegal.

- **Regla de Oro:** Solo atacas lo que estÃ¡ en el contrato. Si el cliente usa un servidor de terceros (como AWS o Azure), a veces se necesitan permisos especiales (aunque AWS ya permite pruebas estÃ¡ndar sin aviso previo, pero siempre verifica).
    
- **Privacidad:** Si entras a una base de datos y ves tarjetas de crÃ©dito o fotos familiares, **PARA**. No descargues los datos. Reporta que _puedes_ acceder, pero respeta la privacidad (Leyes de ProtecciÃ³n de Datos).
    

---

## 5. MÃ©todos de Ensayo: Â¿Desde dÃ³nde atacamos? ðŸ“

### A. Pruebas Externas (External)

Somos el hacker en su casa, en pijama, atacando desde Internet.

- **Objetivo:** Romper el perÃ­metro (Firewalls, Webs pÃºblicas).
    
- **Estilo:** Puede ser ruidoso (intentando todo rÃ¡pido) o sigiloso (para ver si sus alarmas nos detectan).
    

### B. Pruebas Internas (Internal)

Imagina que ya estÃ¡s dentro del edificio.

- **Escenario:** Puede ser un empleado descontento, o un hacker que ya logrÃ³ hackear una PC de la secretaria a travÃ©s de Phishing.
    
- **Objetivo:** Moverse lateralmente y llegar a los servidores crÃ­ticos.
    

---

## 6. Tipos de Pentest: Las "Cajas" de InformaciÃ³n ðŸ“¦

La cantidad de informaciÃ³n que el cliente te da al inicio define la dificultad y el realismo.

| **Tipo (Caja)**            | **InformaciÃ³n Inicial**                                             | **AnalogÃ­a**                                                                        |
| -------------------------- | ------------------------------------------------------------------- | ----------------------------------------------------------------------------------- |
| **Blackbox (Caja Negra)**  | **Nula.** Solo te dan el nombre de la empresa o una IP.             | Resolver un rompecabezas sin ver la foto de la caja. Simula un ataque externo real. |
| **Greybox (Caja Gris)**    | **Parcial.** Te dan credenciales de usuario bÃ¡sico, o mapas de red. | Tienes algunas pistas. Es el equilibrio perfecto entre tiempo y realismo.           |
| **Whitebox (Caja Blanca)** | **Total.** Tienes cÃ³digo fuente, diagramas, admins.                 | Tienes la hoja de trucos. Se usa para auditorÃ­as muy profundas y rÃ¡pidas.           |

![[types-testing.png]]

---

## 7. SimulaciÃ³n PrÃ¡ctica: Â¿CÃ³mo se ve esto en la vida real? ðŸ› ï¸
Imagina que te contratan para un **Pentest Greybox** a una tienda online.

1. **Acuerdo (Pre-Engagement):** Firmas el contrato. Te dicen: "Prueba `tienda.com`, pero no toques el servidor de correos".
    
2. **Reconocimiento (Information Gathering):** Aunque es Greybox, investigas. Â¿QuÃ© tecnologÃ­as usan? Â¿QuiÃ©nes son los empleados?
    
3. **Escaneo (Scanning):** Usas herramientas (como Nmap) para ver quÃ© puertas estÃ¡n abiertas. Encuentras el puerto 80 (Web) abierto.
    
4. **AnÃ¡lisis de Vulnerabilidades:** Un escÃ¡ner te dice "Posible inyecciÃ³n SQL en el login".
    
5. **ExplotaciÃ³n (El Hackeo):** AquÃ­ entra tu magia manual. Pruebas el login `admin' --`. Â¡Bum! Entraste sin contraseÃ±a.
    
    - _Nota:_ Un escÃ¡ner solo te dirÃ­a "posible error". TÃº confirmas el acceso.
        
6. **Post-ExplotaciÃ³n:** Ahora que eres admin, Â¿quÃ© mÃ¡s puedes ver? Â¿Puedes saltar al servidor de la base de datos? (Siempre respetando el alcance).
    
7. **Informe (Reporting):** Escribes un reporte ejecutivo (para el jefe: "TenÃ©is un riesgo alto") y uno tÃ©cnico (para el informÃ¡tico: "Arreglad el cÃ³digo en la lÃ­nea 40").
    
![[fases-pentest.png]]

---
## 8. ðŸ”ŽTipos de entornos de pruebas

AdemÃ¡s del mÃ©todo de prueba y el tipo de prueba, otra consideraciÃ³n es quÃ© se va a probar, que puede resumirse en las siguientes categorÃ­as:

||||||
|---|---|---|---|---|
|Red|AplicaciÃ³n web|MÃ³vil|API|Clientes Gruesos|
|MontÃ³n|Nube|CÃ³digo fuente|Seguridad fÃ­sica|Empleados|
|Hosts|Servidor|PolÃ­ticas de seguridad|Cortafuegos|IDS/IPS|
> **ðŸ’¡Nota:** Estas categorÃ­as a menudo pueden mezclarse. Todos los componentes de prueba listados pueden incluirse dependiendo del tipo de prueba que se vaya a realizar. 
### ðŸŽ“ Resumen para llevar

- **Pentest vs Red Team:** Pentest busca _todos_ los fallos; Red Team busca _un_ objetivo especÃ­fico a toda costa.
    
- **Pentest vs Vuln Scan:** Pentest es manual e inteligente; Vuln Scan es automÃ¡tico y superficial.
    
- **El Pentester no arregla:** Nosotros diagnosticamos la enfermedad, el cliente la cura.
    
- **Colores de Cajas:** Blackbox (a ciegas), Greybox (info parcial), Whitebox (todo visible).
    
- **Regla de Oro:** Sin permiso escrito, es delito.
    