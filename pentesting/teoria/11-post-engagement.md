# 11 - Post-Engagement: El Arte de Cerrar el Ciclo üèÅ

> **üéØ Objetivo:** Aprender√°s que el trabajo de un Pentester no termina cuando consiguen acceso (root/admin). Descubrir√°s c√≥mo limpiar tus huellas, crear el informe perfecto, gestionar la remediaci√≥n y cerrar el proyecto con profesionalismo para que el cliente quede seguro y satisfecho.

---

### 1. Limpieza (Cleanup): "No dejes rastro" üßπ

Imagina que eres un cirujano. La operaci√≥n fue un √©xito, pero no puedes dejar el bistur√≠ dentro del paciente. En el Pentesting ocurre lo mismo.

Justo despu√©s de terminar tus escaneos, explotaci√≥n y movimientos laterales, entramos en la fase de Cleanup.

> Imagina que... ‚õ∫ Has ido de acampada a un parque nacional. La regla de oro es "dejar el sitio igual o mejor de lo que lo encontraste".
> Si creaste un usuario llamado hacker_backdoor o subiste un script mimikatz.exe, debes eliminarlos. Si cambiaste una configuraci√≥n para entrar, debes revertirla.

**Reglas de Oro de la Limpieza:**

1. **Eliminar:** Borra scripts, herramientas y archivos subidos.
    
2. **Revertir:** Deshaz cambios de configuraci√≥n (ej: si a√±adiste un admin local).
    
3. **Documentar:** Si NO puedes borrar algo (por falta de acceso o riesgo de romper algo), **avisa al cliente** y ponlo en el ap√©ndice del reporte.
    
4. **Registro:** Incluso si limpiaste todo, docum√©ntalo en el reporte. ¬øPor qu√©? Porque si el equipo de seguridad (Blue Team) vio tu actividad, el cliente necesita confirmar que fuiste t√∫ y no un atacante real.
    

---

### 2. Documentaci√≥n y Reporte: Tu Obra Maestra üìù

Antes de desconectarte de la red del cliente (o enviar el correo de "STOP"), aseg√∫rate de tener **toda la evidencia**. No querr√°s perder acceso y darte cuenta de que olvidaste una captura de pantalla vital.

> **üí° Nota:** Recopila logs, outputs de comandos, lista de hosts afectados y capturas. Pero, **¬°CUIDADO!** No guardes Informaci√≥n de Identificaci√≥n Personal (PII) o datos sensibles innecesarios.

El reporte es el producto final por el que pagan. Debe tener una estructura clara:

- **Cadena de Ataque (Attack Chain):** La historia paso a paso de c√≥mo pasaste de "cero" a "due√±o del sistema".
    
- **Resumen Ejecutivo:** Para los jefes (CEOs, Directores). Sin tecnicismos, solo impacto de negocio.
    
- **Hallazgos T√©cnicos:** Para los inform√°ticos. Con clasificaci√≥n de riesgo, impacto y referencias.
    
- **Pasos de Reproducci√≥n:** Una "receta" exacta para que ellos puedan replicar el fallo.
    
- **Recomendaciones:** A corto, medio y largo plazo.

![[reporte-final-pentesting.png]]

---

### 3. La Reuni√≥n de Revisi√≥n y Entrega ü§ù

El proceso de entrega funciona como un borrador de un libro:

1. **Borrador (DRAFT):** Env√≠as la primera versi√≥n.
    
2. **Reuni√≥n de Revisi√≥n:** Te re√∫nes con el cliente. **No leas el reporte palabra por palabra** (eso aburre). Explica los hallazgos clave, aporta tu perspectiva y responde dudas.
    
3. **Feedback:** El cliente puede pedir aclaraciones o correcciones.
    
4. **Final (FINAL):** Entregas la versi√≥n definitiva limpia.
    

> **üí° Nota:** Algunas empresas de auditor√≠a externa exigen ver la versi√≥n "FINAL" sin marcas de agua de borrador para aceptar el cumplimiento de normas.

---

### 4. Post-Remediaci√≥n: ¬øRealmente lo arreglaron? üõ†Ô∏è

La mayor√≠a de contratos incluyen el **Retesting** o "Post-Remediation Testing". Aqu√≠ verificamos si el cliente aplic√≥ los parches correctamente.

Debes volver a entrar y probar cada fallo reportado. El resultado suele presentarse en una tabla comparativa clara:

### üìä Estado de Post-Remediaci√≥n

|**#**|**Severidad**|**T√≠tulo del Hallazgo**|**Estado Final**|
|---|---|---|---|
|1|üî¥ Alta|SQL Injection|**Remediado** ‚úÖ|
|2|üî¥ Alta|Broken Authentication|**Remediado** ‚úÖ|
|3|üü† Media|SMB Signing Not Enabled|**NO Remediado** ‚ùå|
|4|üü° Baja|Directory Listing|**NO Remediado** ‚ùå|

> üõ°Ô∏è Nota de Seguridad (Rol del Pentester):
> 
> Aqu√≠ hay una l√≠nea roja que NO debes cruzar. T√∫ eres el auditor, no el alba√±il.
> 
> - **Tu rol:** Encontrar fallos y verificar si se arreglaron.
>     
> - **Lo que NO debes hacer:** Aplicar los parches, reescribir el c√≥digo del cliente o configurar su Active Directory.
>     
> 
> ¬øPor qu√©? **Conflicto de Inter√©s.** No puedes auditar tu propio trabajo de forma imparcial. Mantente como un asesor independiente.

---

### 5. Retenci√≥n de Datos y Cierre del Proyecto üîí

Una vez terminado todo, te quedas con un mont√≥n de datos sensibles del cliente (passwords, volcados de bases de datos, etc.). ¬øQu√© haces con eso?

1. **Retenci√≥n:** Guarda la evidencia un tiempo (seg√∫n el contrato o leyes locales) por si el cliente tiene preguntas futuras o disputas.
    
2. **Seguridad:** Estos datos deben estar en un almacenamiento cifrado y seguro.
    
3. **Destrucci√≥n:** Cuando pase el tiempo estipulado, **b√≥rralo todo**. Limpia (wipe) las m√°quinas virtuales usadas.
    

![[data-destroyed.png]]

El Toque Final:

El cliente recordar√° dos cosas: la calidad de tu reporte y c√≥mo los trataste. Las habilidades blandas (comunicaci√≥n, empat√≠a) son lo que asegura el siguiente contrato, no solo el exploit complejo que usaste.

---

### üéì Resumen para llevar

- **Limpia tu desorden:** Borra herramientas y revierte cambios. Si no puedes, docum√©ntalo.
    
- **El Reporte es el Rey:** Debe tener un resumen para ejecutivos y detalles t√©cnicos para administradores (con pasos para reproducir).
    
- **T√∫ auditas, ellos arreglan:** Nunca implementes los parches t√∫ mismo para mantener la imparcialidad.
    
- **Ciclo de Entrega:** Borrador -> Reuni√≥n de Revisi√≥n -> Feedback -> Reporte Final.
    
- **Seguridad de Datos:** Cifra la evidencia mientras la guardas y destr√∫yela de forma segura cuando expire el plazo de retenci√≥n.